{"ast":null,"code":"import _defineProperty from \"/var/www/html/soofi/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/var/www/html/soofi/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/html/soofi/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/var/www/html/soofi/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/var/www/html/soofi/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/var/www/html/soofi/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/var/www/html/soofi/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/var/www/html/soofi/client/src/views/Home/Home.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport './Home.css';\nimport { PostData } from '../../services/PostData';\nimport { SanAlert } from '../Alert/SanAlert';\n\nvar getBase64 = function getBase64(file) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n\n    reader.onload = function () {\n      return resolve(reader.result);\n    };\n\n    reader.onerror = function (error) {\n      return reject(error);\n    };\n\n    reader.readAsDataURL(file);\n  });\n};\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n\n    _this.imageUpload = function (e) {\n      var file = e.target.files[0];\n      getBase64(file).then(function (base64) {\n        _this.setState({\n          images: base64\n        });\n      });\n    };\n\n    _this.state = {\n      page: 'home',\n      data: [],\n      product_name: '',\n      price: '',\n      description: '',\n      images: '',\n      redirectToReferrer: false\n    };\n    _this.getUserFeed = _this.getUserFeed.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.convertTime = _this.convertTime.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.add_product = _this.add_product.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.logout = _this.logout.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"add_product\",\n    value: function add_product() {\n      if (this.state.product_name && this.state.price) {\n        PostData('products/add_product', this.state).then(function (result) {\n          var responseJson = result;\n\n          if (responseJson.userData) {// sessionStorage.setItem('userData',JSON.stringify(responseJson));\n            // this.setState({redirectToReferrer: true});\n          }\n        });\n      }\n    }\n  }, {\n    key: \"convertTime\",\n    value: function convertTime(created) {\n      var date = new Date(created * 1000);\n      return date;\n    }\n  }, {\n    key: \"getUserFeed\",\n    value: function getUserFeed() {\n      var _this2 = this;\n\n      var data = JSON.parse(sessionStorage.getItem(\"userData\"));\n      this.setState({\n        name: data.userData.name\n      });\n      var postData = {\n        user_id: data.userData.user_id,\n        token: data.userData.token\n      };\n\n      if (data) {\n        PostData('feed', postData).then(function (result) {\n          var responseJson = result;\n\n          _this2.setState({\n            data: responseJson.feedData\n          });\n        });\n      }\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(e) {\n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      sessionStorage.setItem(\"userData\", '');\n      sessionStorage.clear();\n      this.setState({\n        redirectToReferrer: true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.redirectToReferrer) {\n        return React.createElement(Redirect, {\n          to: '/login',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Add Product\"))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"productname\",\n        className: \"loginFormElement\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"Product Name:\"), React.createElement(\"input\", {\n        className: \"form-control\",\n        id: \"productname\",\n        type: \"text\",\n        name: \"product_name\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"productprice\",\n        className: \"loginFormElement\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Product Price\"), React.createElement(\"input\", {\n        className: \"form-control\",\n        id: \"productprice\",\n        type: \"text\",\n        name: \"price\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"control-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Product Image\"), React.createElement(\"input\", {\n        className: \"filestyle\",\n        \"data-icon\": \"false\",\n        type: \"file\",\n        name: \"image\",\n        onChange: this.imageUpload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"loginformelement\",\n        for: \"productdescription\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Product Description\"), React.createElement(\"textarea\", {\n        className: \"form-control\",\n        rows: \"5\",\n        id: \"comment\",\n        name: \"description\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"button\",\n        id: \"loginSubmit\",\n        className: \"btn btn-success loginFormElement\",\n        onClick: this.add_product,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Add Product\")))));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["/var/www/html/soofi/client/src/views/Home/Home.js"],"names":["React","Component","Redirect","PostData","SanAlert","getBase64","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","readAsDataURL","Home","props","imageUpload","e","target","files","then","base64","setState","images","state","page","data","product_name","price","description","redirectToReferrer","getUserFeed","bind","onChange","convertTime","add_product","logout","responseJson","userData","created","date","Date","JSON","parse","sessionStorage","getItem","name","postData","user_id","token","feedData","value","setItem","clear"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Redirect} from 'react-router-dom';\nimport './Home.css';\nimport {PostData} from '../../services/PostData';\nimport { SanAlert } from '../Alert/SanAlert'\n\nconst getBase64 = (file) => {\n  return new Promise((resolve,reject) => {\n    const reader = new FileReader();\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n    reader.readAsDataURL(file);\n  });\n}\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      page:'home',\n      data:[],\n      product_name: '',\n      price: '',\n      description: '',\n      images: '',\n      redirectToReferrer: false,\n    };\n    this.getUserFeed = this\n    .getUserFeed\n    .bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.convertTime = this.convertTime.bind(this);\n    this.add_product = this.add_product.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n\n  add_product() {\n    if(this.state.product_name && this.state.price){\n      PostData('products/add_product',this.state).then((result) => {\n        let responseJson = result;\n        if(responseJson.userData){\n          // sessionStorage.setItem('userData',JSON.stringify(responseJson));\n          // this.setState({redirectToReferrer: true});\n        }\n      });\n    }\n  }\n\n  imageUpload = (e) => {\n    const file = e.target.files[0];\n    getBase64(file).then(base64 => {\n      this.setState({images:base64});\n    });\n  }\n\n  convertTime(created) {\n    let date = new Date(created * 1000);\n    return date;\n  }\n\n  getUserFeed() {\n    let data = JSON.parse(sessionStorage.getItem(\"userData\"));\n    this.setState({name:data.userData.name});\n    let postData = { user_id: data.userData.user_id, token: data.userData.token};\n    if (data) {\n      PostData('feed', postData).then((result) => {\n        let responseJson = result;\n        this.setState({data: responseJson.feedData});\n      });\n    }\n\n  }\n\n  onChange(e){\n    this.setState({[e.target.name]:e.target.value});\n  }\n  logout(){\n    sessionStorage.setItem(\"userData\",'');\n    sessionStorage.clear();\n    this.setState({redirectToReferrer: true});\n  }\n\n  render() {\n    if (this.state.redirectToReferrer) {\n      return (<Redirect to={'/login'}/>)\n    }\n    return (\n      <div className=\"container\">\n      <div className=\"row\">\n      <div className=\"col-md-6\">\n      <h1>Add Product</h1>\n      </div>\n      </div>\n      <div className=\"row\">\n      <div className=\"col-md-6\">\n      <div className=\"form-group\">\n      <label for=\"productname\" className=\"loginFormElement\">Product Name:</label>\n      <input className=\"form-control\" id=\"productname\" type=\"text\" name=\"product_name\" onChange={this.onChange} />\n      </div>\n      <div className=\"form-group\">\n      <label for=\"productprice\" className=\"loginFormElement\">Product Price</label>\n      <input className=\"form-control\" id=\"productprice\" type=\"text\" name=\"price\" onChange={this.onChange}/>\n      </div>\n      <div className=\"form-group\">\n      <label className=\"control-label\">Product Image</label>\n      <input className=\"filestyle\" data-icon=\"false\" type=\"file\" name=\"image\" onChange={this.imageUpload} />\n      </div>\n      <div className=\"form-group\">\n      <label className=\"loginformelement\" for=\"productdescription\">Product Description</label>\n      <textarea className=\"form-control\" rows=\"5\" id=\"comment\" name=\"description\" onChange={this.onChange} ></textarea>\n      <div className=\"container\">\n      </div>\n      <button type=\"button\" id=\"loginSubmit\" className=\"btn btn-success loginFormElement\" onClick={this.add_product}>Add Product</button>\n      </div>\n      </div>\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}